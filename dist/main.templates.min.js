!function(e){try{e=angular.module("stateRouterScenario")}catch(t){e=angular.module("stateRouterScenario",["ui.router"])}e.run(function(e,t){e.localStorage.leonardoMock||(t.whenGET(new RegExp("/")).passThrough(),t.whenPOST(new RegExp("/")).passThrough(),t.whenGET=function(){return{passThrough:function(){},respond:function(){}}},t.whenPOST=function(){return{passThrough:function(){},respond:function(){}}})}),e.provider("srsManager",function(){var e=this;this.items=angular.fromJson(localStorage.getItem("activeScenarios")||"[]"),this.items.remove=function(e,t){var n=this.filter(function(n){return!(n.domain===e&&n.name===t)});this.splice(0,this.length),n.forEach(function(e){this.push(e)},this)},this.items.contains=function(e,t){return this.some(function(n){return n.domain===e&&n.name===t?!0:void 0})},this.items.place=function(e,t,n){n?"default"===t||this.contains(e,t)||this.push({domain:e,name:t}):this.remove(e,t)},this.init=function(e){this.list=e},this.$get=["$rootScope","$log","$state","$modal","$window",function(t,n,i,a,o){function s(e){if("string"==typeof e){e=e.split(":");var t=new XMLHttpRequest;return t.open("GET","/js/selfserve/engage/dev/local-app/mock/data"+e[1],!1),t.send(null),[e[0],t.response]}return e instanceof Array?e:void e()}var l,c=function(){l=a.open({templateUrl:"templates/modalContent.html",controller:["$scope","$state","$modalInstance",function(t,n,i){t.vm={passThrough:!o.localStorage.leonardoMock},t.$watch("vm.passThrough",function(e,t){angular.isDefined(e)&&e!==t&&(e?delete o.localStorage.leonardoMock:o.localStorage.leonardoMock=!0,o.location.reload())}),t.items=e.list.reduce(function(t,i){return n.includes(i.state)?t.concat(i.options.map(function(t){if(t.items){var n=t.title;t=t.items,t.title=n}else t=[t];var a="default",o=t.map(function(t){var n=e.items.contains(i.domain,t.name);return n&&(a=t.name),{text:t.text,name:t.name,selected:n}});return o.domain=i.domain,o.selected=a,o.title=t.title,o})):t},[]),t.ok=function(){t.items.forEach(function(t){1===t.length?e.items.place(t.domain,t[0].name,t[0].selected):(t.forEach(function(n){e.items.place(t.domain,n.name,!1)}),t.selected&&e.items.place(t.domain,t.selected,!0))}),localStorage.setItem("activeScenarios",angular.toJson(e.items)),i.close(t.items)},t.cancel=function(){i.dismiss("cancel")}}]}),l.result.then(function(){},function(){n.info("Modal dismissed at: "+new Date)})};return{isActive:function(t,n){return e.items.contains(t,n)},generateResponse:function(e,t,n){return n=n||[],n.filter(function(e){return this.isActive(t,e.scenario)},this).concat([{response:s(e)}])[0].response},openModal:function(){c()}}}]})}(),function(e){try{e=angular.module("stateRouterScenario.templates")}catch(t){e=angular.module("stateRouterScenario.templates",[])}e.run(["$templateCache",function(e){e.put("templates/modalContent.html",'<div class="modal-header"><h3 class="modal-title">Scenario Config</h3><div class="onoffswitch"><input ng-model="vm.passThrough" class="onoffswitch-checkbox" id="passThrough" type="checkbox" name="passThrough" value="true"><label class="onoffswitch-label" for="passThrough"><span class="onoffswitch-inner"></span> <span class="onoffswitch-switch"></span></label></div></div><div class="modal-body"><ul class="clearfix"><li ng-repeat="item in items" ng-class="{ \\\'is-group\\\': item.length > 1 }"><div ng-if="item.length === 1"><label>{{item[0].text}}</label><div class="onoffswitch"><input ng-model="item[0].selected" class="onoffswitch-checkbox" id="{{item[0].name}}" type="checkbox" name="{{item[0].name}}" value="{{item[0].name}}"><label class="onoffswitch-label" for="{{item[0].name}}"><span class="onoffswitch-inner"></span> <span class="onoffswitch-switch"></span></label></div></div><div ng-if="item.length > 1" class="group"><h4 ng-if="item.title">{{item.title}}</h4><ul class="clearfix"><li><label>Default</label><input ng-model="item.selected" type="radio" name="multi_{{$parent.$index}}" value="default"></li><li ng-repeat="subItem in item"><label>{{subItem.text}}</label><input ng-model="item.selected" type="radio" name="multi_{{$parent.$index}}" value="{{subItem.name}}"></li></ul></div></li></ul></div><div class="modal-footer"><button class="btn btn-primary" ng-click="ok()">OK</button> <button class="btn btn-warning" ng-click="cancel()">Cancel</button></div>')}])}();