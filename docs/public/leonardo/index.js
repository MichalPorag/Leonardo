$traceurRuntime.options.symbols = true;
var $__index_46_js__ = (function() {
  "use strict";
  var __moduleName = "index.js";
  var Flicker = angular.module('flicker-example', ["leonardo"]).config(function($locationProvider) {
    $locationProvider.html5Mode(false);
  }).run(function($rootScope, flickerGetter) {
    flickerGetter.getData().then(function(data) {
      $rootScope.images = data;
    });
  });
  Flicker.factory('flickerGetter', function($q, $http) {
    return {getData: function() {
        var defer = $q.defer();
        $http.jsonp('http://api.flickr.com/services/feeds/photos_public.gne', {params: {
            format: 'json',
            jsoncallback: 'JSON_CALLBACK'
          }}).success(function(data) {
          data = data.items.map(function(item) {
            var author,
                thumbnail = item.media.m;
            angular.forEach(['m.jpg', 'm.gif', 'm.png'], function(item) {
              thumbnail = thumbnail.replace(item, 't.' + item.split('.')[1]);
            });
            author = item.author.split(' ')[1];
            return {
              author_id: item.author_id,
              media: item.media,
              page: item.link,
              title: item.title.length > 60 ? item.title.substr(0, 50) + '...' : item.title,
              author: author,
              date_taken: moment(item.date_taken).format("MMM Do YYYY"),
              thumbnail: thumbnail
            };
          });
          defer.resolve(data);
        }).error(function() {
          defer.resolve();
        });
        return defer.promise;
      }};
  });
  return {};
})();
//# sourceMappingURL=data:application/json;base64,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ImZpbGUiOiIvVXNlcnMvc2ZyYW5rZWwvZGV2L291dGJyYWluL0xlb25hcmRvL3RlbXBvdXRNQzQxTkRneU16STBOVEkwTnpneU5UazQuanMiLCJzb3VyY2VzQ29udGVudCI6W251bGwsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgRmxpY2tlciA9IGFuZ3VsYXIubW9kdWxlKCdmbGlja2VyLWV4YW1wbGUnLCBbXCJsZW9uYXJkb1wiXSlcbiAgLmNvbmZpZyhmdW5jdGlvbiAoJGxvY2F0aW9uUHJvdmlkZXIpIHtcbiAgICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUoZmFsc2UpO1xuICB9KVxuICAucnVuKGZ1bmN0aW9uKCRyb290U2NvcGUsIGZsaWNrZXJHZXR0ZXIpe1xuICAgIGZsaWNrZXJHZXR0ZXIuZ2V0RGF0YSgpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAkcm9vdFNjb3BlLmltYWdlcyA9IGRhdGE7XG4gICAgfSk7XG4gIH0pO1xuXG5GbGlja2VyLmZhY3RvcnkoJ2ZsaWNrZXJHZXR0ZXInLCBmdW5jdGlvbiAoJHEsICRodHRwKSB7XG4gIHJldHVybiB7XG4gICAgZ2V0RGF0YTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGRlZmVyID0gJHEuZGVmZXIoKTtcblxuICAgICAgJGh0dHAuanNvbnAoJ2h0dHA6Ly9hcGkuZmxpY2tyLmNvbS9zZXJ2aWNlcy9mZWVkcy9waG90b3NfcHVibGljLmduZScsIHtcbiAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgZm9ybWF0OiAnanNvbicsXG4gICAgICAgICAganNvbmNhbGxiYWNrOiAnSlNPTl9DQUxMQkFDSydcbiAgICAgICAgfVxuICAgICAgfSkuc3VjY2VzcyhmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBkYXRhID0gZGF0YS5pdGVtcy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICB2YXIgYXV0aG9yLFxuICAgICAgICAgICAgdGh1bWJuYWlsID0gaXRlbS5tZWRpYS5tO1xuXG4gICAgICAgICAgYW5ndWxhci5mb3JFYWNoKFsnbS5qcGcnLCAnbS5naWYnLCAnbS5wbmcnXSwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHRodW1ibmFpbCA9IHRodW1ibmFpbC5yZXBsYWNlKGl0ZW0sICd0LicgKyBpdGVtLnNwbGl0KCcuJylbMV0pO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYXV0aG9yID0gaXRlbS5hdXRob3Iuc3BsaXQoJyAnKVsxXTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXV0aG9yX2lkOiBpdGVtLmF1dGhvcl9pZCxcbiAgICAgICAgICAgIG1lZGlhOiBpdGVtLm1lZGlhLFxuICAgICAgICAgICAgcGFnZTogaXRlbS5saW5rLFxuICAgICAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUubGVuZ3RoID4gNjAgPyBpdGVtLnRpdGxlLnN1YnN0cigwLCA1MCkgKyAnLi4uJyA6IGl0ZW0udGl0bGUsXG4gICAgICAgICAgICBhdXRob3I6IGF1dGhvcixcbiAgICAgICAgICAgIGRhdGVfdGFrZW46IG1vbWVudChpdGVtLmRhdGVfdGFrZW4pLmZvcm1hdChcIk1NTSBEbyBZWVlZXCIpLFxuICAgICAgICAgICAgdGh1bWJuYWlsOiB0aHVtYm5haWxcbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgZGVmZXIucmVzb2x2ZShkYXRhKTtcbiAgICAgIH0pLmVycm9yKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVmZXIucmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBkZWZlci5wcm9taXNlO1xuICAgIH1cbiAgfTtcbn0pO1xuIl19
