<!DOCTYPE html>

<html ng-app="example">
<head>
  <title>window-body.drv.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="public/docco.css" />
  <link rel="stylesheet" media="all" href="public/leonardo/app.min.css" />
</head>
<body activator>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              <a class="source" href="../index.html" %>
                Back to example index.html
              </a>
              
                
                <a class="source" href="activator.drv.html">
                  activator.drv.js
                </a>
              
                
                <a class="source" href="configuration.srv.html">
                  configuration.srv.js
                </a>
              
                
                <a class="source" href="module.html">
                  module.js
                </a>
              
                
                <a class="source" href="window-body.drv.html">
                  window-body.drv.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>window-body.drv.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h2 id="this-is-a-header">This Is A Header</h2>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              
            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>This is a normal comment, that will become part of the
annotations after running through the Docco tool. Use this
space to describe the function or other code just below
this comment. For example:</p>
<p>The <code>DoSomething</code> method does something! It doesn’t take any
parameters… it just does something.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">windowBodyDirective</span><span class="hljs-params">($http, configuration)</span> </span>{
  <span class="hljs-keyword">return</span> {
    restrict: <span class="hljs-string">'E'</span>,
    templateUrl: <span class="hljs-string">'window-body.html'</span>,
    scope: <span class="hljs-literal">true</span>,
    replace: <span class="hljs-literal">true</span>,
    controller: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">($scope)</span></span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>$scope.selectedItem = ‘activate’;</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
      configuration.getActiveStateOptions().then(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(rows)</span></span>{
        <span class="hljs-keyword">var</span> activeStates = {};
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; rows.length; i++) {
          activeStates[rows.item(i).state] = { name: rows.item(i).name, active: (rows.item(i).active === <span class="hljs-string">"true"</span>) };
        }

        $scope.states = configuration.states.map(state =&gt; angular.copy(state));
        $scope.states.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(state)</span> </span>{
          <span class="hljs-keyword">let</span> option = activeStates[state.name];
          state.active = !!option &amp;&amp; option.active;
          state.activeOption = !!option ? state.options.find(_option =&gt; _option.name === option.name) : state.options[<span class="hljs-number">0</span>];
        });

        $scope.changeActive = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(state)</span></span>{
          <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"activate: "</span> + state.name + <span class="hljs-string">" "</span> + state.active);
          configuration.upsertOption(state.name, state.activeOption.name, state.active);
        };

        $scope.states.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(state)</span></span>{
          $scope.$watch(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
            <span class="hljs-keyword">return</span> state.activeOption;
          }, <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(activeOption, oldValue)</span></span>{
            <span class="hljs-keyword">if</span> (activeOption !== oldValue){
              <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"select: "</span> + state.name + <span class="hljs-string">" "</span> + activeOption.name + <span class="hljs-string">" "</span> + state.active);
              configuration.upsertOption(state.name, activeOption.name, state.active);
            }
          });
        });
      });
    },
    link: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(scope)</span> </span>{
      scope.submit = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(value)</span></span>{
        <span class="hljs-keyword">if</span> (value) {
          $http.get(value).success(<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(res)</span> </span>{
            scope.value = res;
          });
        }
      };
    }
  };
}

export <span class="hljs-keyword">default</span> windowBodyDirective</pre></div></div>
            
        </li>
        
    </ul>
  </div>
  <script src='https://code.jquery.com/jquery-2.1.3.min.js'></script>
  <script src='public/leonardo/angular.min.js'></script>
  <script src="public/leonardo/angular-mocks.js"></script>
  <script src='public/leonardo/traceur-runtime.min.js'></script>
  <script src="public/leonardo/leonardo.templates.min.js"></script>
  <script src="public/leonardo/module.js"></script>
  <script src="public/leonardo/index.js"></script>
</body>
</html>
